<!DOCTYPE html>
<html>
<head>
    <title>SVG Loading Test</title>
    <style>
        body { margin: 20px; font-family: Arial, sans-serif; }
        #container { width: 800px; height: 500px; border: 2px solid #ccc; }
        #log { background: #f0f0f0; padding: 10px; margin: 10px 0; font-family: monospace; }
    </style>
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
    <h1>SVG Loading Test</h1>
    <div id="log">Loading...</div>
    <div id="container"></div>
    
    <script>
        const log = document.getElementById('log');
        
        function addLog(message) {
            log.innerHTML += message + '<br>';
            console.log(message);
        }
        
        addLog('üîç Testing SVG loading...');
        
        d3.xml('/assets/us.svg')
            .then((xml) => {
                addLog('‚úÖ SVG loaded successfully');
                addLog(`üìä XML type: ${xml.constructor.name}`);
                addLog(`üìä Document element: ${xml.documentElement.tagName}`);
                
                const container = document.getElementById('container');
                container.innerHTML = '';
                
                const importedNode = document.importNode(xml.documentElement, true);
                container.appendChild(importedNode);
                
                addLog('‚úÖ SVG imported into DOM');
                
                const svg = d3.select(container).select('svg');
                svg.attr('width', '100%')
                   .attr('height', '100%')
                   .attr('viewBox', '0 0 1000 589');
                
                const paths = svg.selectAll('path[id]');
                addLog(`‚úÖ Found ${paths.size()} state paths`);
                
                // Test coloring a few states
                paths.each(function() {
                    const path = d3.select(this);
                    const id = path.attr('id');
                    if (['CA', 'TX', 'NY', 'FL'].includes(id)) {
                        path.style('fill', '#ff0000').style('opacity', 0.8);
                        addLog(`üé® Colored state: ${id}`);
                    }
                });
                
                addLog('‚úÖ Test complete - red states should be visible');
            })
            .catch((error) => {
                addLog(`‚ùå Error: ${error.message}`);
                addLog(`‚ùå Full error: ${error}`);
            });
    </script>
</body>
</html>